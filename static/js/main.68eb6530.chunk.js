(this.webpackJsonpray_casting=this.webpackJsonpray_casting||[]).push([[0],{15:function(t,i,e){},16:function(t,i,e){},17:function(t,i,e){},18:function(t,i,e){"use strict";e.r(i);var n={};e.r(n),e.d(n,"scaleValue",(function(){return y}));var s=e(2),a=e.n(s),o=e(8),r=e.n(o),h=e(0),c=e(1),_=e(4),l=e(5),u=e(6),p=e(3),f=e.n(p);function y(t,i,e){if(t<i.start||t>i.end)throw new Error("".concat(t," must be inside ").concat(i.start," - ").concat(i.end));var n=(e.end-e.start)/(i.end-i.start),s=Math.min(i.end,Math.max(i.start,t))-i.start;return Math.floor(s*n+e.start)}var d={numbers:n},v=function(){function t(i,e,n,s){Object(h.a)(this,t),this._p5=void 0,this._position=void 0,this._direction=void 0,this._sightQuality=void 0,this._p5=i,this._position=e,this._direction=f.a.Vector.fromAngle(n),this._sightQuality=s}return Object(c.a)(t,[{key:"intersects",value:function(t){var i=t.a.x,e=t.a.y,n=t.b.x,s=t.b.y,a=this._position.x,o=this._position.y,r=this._position.x+this._direction.x,h=this._position.y+this._direction.y,c=(i-n)*(o-h)-(e-s)*(a-r);if(c){var _=((i-a)*(o-h)-(e-o)*(a-r))/c;if(_>0&&_<1&&-((i-n)*(e-o)-(e-s)*(i-a))/c>0){var l=this._p5.createVector();return l.x=i+_*(n-i),l.y=e+_*(s-e),l}}}},{key:"show",value:function(){this._p5.stroke(255),this._p5.push(),this._p5.translate(this._position.x,this._position.y),this._p5.line(0,0,10*this._direction.x,10*this._direction.y),this._p5.pop()}},{key:"quality",get:function(){return this._sightQuality}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t}}]),t}(),w=function(){function t(i,e){for(Object(h.a)(this,t),this._p5=void 0,this._position=void 0,this._rays=void 0,this._heading=void 0,this._rayRotation=0,this._baseQuality=255,this._maxAngle=60,this._cutOffAngle=0,this._p5=i,this._position=this._p5.createVector(e.x,e.y),this._rays=[],this._heading=0,this._rayRotation=-this._maxAngle;this._rayRotation<=this._maxAngle;this._rayRotation+=.2){var n=0;if(this._rayRotation<=-this._cutOffAngle||this._rayRotation>=this._cutOffAngle){var s=1-d.numbers.scaleValue(Math.abs(this._rayRotation)-this._cutOffAngle,{start:0,end:this._maxAngle-this._cutOffAngle},{start:0,end:100})/100;n=this._baseQuality*s}else n=this._baseQuality;this._rays.push(new v(this._p5,this._position,this._p5.radians(this._rayRotation),n))}}return Object(c.a)(t,[{key:"position",value:function(t,i){this._position.set(t,i)}},{key:"rotate",value:function(t){this._heading+=t;var i=0;for(this._rayRotation=-this._maxAngle;this._rayRotation<=this._maxAngle;this._rayRotation+=.2)this._rays[i].direction=f.a.Vector.fromAngle(this._p5.radians(this._rayRotation)+this._heading),i++}},{key:"move",value:function(t){var i=f.a.Vector.fromAngle(this._heading);i.setMag(t),this._position.add(i)}},{key:"look",value:function(t){var i,e=[],n=Object(u.a)(this._rays);try{for(n.s();!(i=n.n()).done;){var s,a=i.value,o=null,r=1/0,h=Object(u.a)(t);try{for(h.s();!(s=h.n()).done;){var c=s.value,_=a.intersects(c);if(_){var l=f.a.Vector.dist(this._position,_),p=a.direction.heading()-this._heading;(l*=this._p5.cos(p))<r&&(r=l,o=_),r=Math.min(l,r)}}}catch(y){h.e(y)}finally{h.f()}o&&(this._p5.stroke(0,255,0,a.quality),this._p5.line(this._position.x,this._position.y,o.x,o.y)),e.push(r)}}catch(y){n.e(y)}finally{n.f()}return e}},{key:"show",value:function(){this._p5.fill(255),this._p5.ellipse(this._position.x,this._position.y,4);var t,i=Object(u.a)(this._rays);try{for(i.s();!(t=i.n()).done;){t.value.show()}}catch(e){i.e(e)}finally{i.f()}}}]),t}(),m=function(){function t(i,e,n,s,a){Object(h.a)(this,t),this._p5=void 0,this.a=void 0,this.b=void 0,this._p5=i,this.a=this._p5.createVector(e,n),this.b=this._p5.createVector(s,a)}return Object(c.a)(t,[{key:"show",value:function(){this._p5.stroke(255),this._p5.line(this.a.x,this.a.y,this.b.x,this.b.y)}}]),t}(),g=function(t){Object(l.a)(e,t);var i=Object(_.a)(e);function e(t){var n;return Object(h.a)(this,e),(n=i.call(this,(function(){}),t))._walls=void 0,n._particle=void 0,n._sceneW=n.windowWidth/2-50,n._sceneH=n.windowHeight/2-50,n.draw=function(){n.keyIsDown(87)&&n._particle.move(1),n.keyIsDown(83)&&n._particle.move(-1),n.keyIsDown(65)&&n._particle.rotate(-.05),n.keyIsDown(68)&&n._particle.rotate(.05),n.background(0);var t,i=Object(u.a)(n._walls);try{for(i.s();!(t=i.n()).done;){t.value.show()}}catch(_){i.e(_)}finally{i.f()}n._particle.position(n.mouseX,n.mouseY),n._particle.show();var e=n._particle.look(n._walls),s=n._sceneW/e.length;n.push(),n.translate(n._sceneW,0);for(var a=0;a<e.length;a++){n.noStroke();var o=e[a]*e[a],r=n._sceneW*n._sceneW,h=n.map(o,0,r,255,0),c=n.map(e[a],0,n._sceneW,n._sceneH,0);n.fill(0,h,0),n.rectMode(n.CENTER),n.rect(a*s+s/2,n._sceneH/2,s+1,c)}n.pop()},n._walls=[],n}return Object(c.a)(e,[{key:"_addCutOffWalls",value:function(){this._walls.push(new m(this,0,0,this._sceneW,0)),this._walls.push(new m(this,this._sceneW,0,this._sceneW,this._sceneH)),this._walls.push(new m(this,this._sceneW,this._sceneH,0,this._sceneH)),this._walls.push(new m(this,0,this._sceneH,0,0))}},{key:"_isKeyDownAnyDefined",value:function(){return this.keyIsDown(87)||this.keyIsDown(83)||this.keyIsDown(65)||this.keyIsDown(68)}},{key:"_createWalls",value:function(){for(var t=0;t<5;t++){var i=this.random(this._sceneW),e=this.random(this._sceneW),n=this.random(this._sceneH),s=this.random(this._sceneH);this._walls.push(new m(this,i,e,n,s))}this._addCutOffWalls()}},{key:"setup",value:function(){this.createCanvas(2*this._sceneW,this._sceneH),this._createWalls(),this._particle=new w(this,{x:this._sceneW/2,y:this._sceneH/2})}},{key:"show",value:function(){}}]),e}(f.a),b=(e(15),function(t){Object(l.a)(e,t);var i=Object(_.a)(e);function e(){return Object(h.a)(this,e),i.apply(this,arguments)}return Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=document.getElementById("canvas-container");new g(t).show()}},{key:"render",value:function(){return s.createElement("div",{id:"canvas-container"})}}]),e}(s.Component)),k=(e(16),function(t){Object(l.a)(e,t);var i=Object(_.a)(e);function e(){return Object(h.a)(this,e),i.apply(this,arguments)}return Object(c.a)(e,[{key:"render",value:function(){return s.createElement("div",{className:"App"},s.createElement(b,null))}}]),e}(s.Component));e(17),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},9:function(t,i,e){t.exports=e(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.68eb6530.chunk.js.map